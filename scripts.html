<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>dorkster</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link href="main.css" rel="stylesheet" type="text/css" title="main"/>
</head>

<body>
    <h1>dorkster</h1>
    <hr/>
    <h2>Shell Scripts</h2>
    <h3>Edit screencast audio</h3>
    <p>This lets me take an ogv screencast that I've recorded with recordMyDesktop and edit the audio track with Audacity. This way, I can perform amplification and noise removal before uploading the final video.</p>
    <code>#!/bin/bash

# Edit and remux audio from a screencast
# $1 is the original video filename

if [ -f "$1" ]; then
    ffmpeg -i "$1" -vn -acodec copy audio.ogg
    audacity audio.ogg
    # note, the file in Audacity must be exported as audio.wav
    if [ -f "audio.wav" ]; then
        ffmpeg -i audio.wav -i "$1" -vcodec copy -acodec libvorbis output_video.ogv
        rm audio.wav
    fi
    rm audio.ogg
fi</code>
    <h3>Copy music to library for Deadbeef</h3>
    <p>The Deadbeef music player doesn't provide a way to copy files natively. This could be because file management is out of scope for a music player, but I want to take advantage of the tags that Deadbeef can read when sorting my music. So I hacked this script together to copy files to my music directory.</p>
    <code>#!/bin/bash

# Copies an mp3 file to a location based on tags
# arguments (in Deadbeef title format): %F %B %b %@disc@ %n %t

# zenity_cmd="zenity --progress --title=\"Copying files\" --text=\"Copying files ...\" --auto-close"

# function to remove invalid characters
clean() {
    echo "$1" | sed 's/\"/\\\"/g' | sed 's/\//_/g'
}

out_path="/home/justin/Music"
out_path="$out_path/$(clean "$2")/$(clean "$3")"

ext="$(echo "$1" | awk -F . '{print $NF}')"

out_filename=""

if [ -z "$5" ]; then
    out_filename="$(clean "$6").$ext"
elif [ -z "$4" ]; then
    out_filename="$5 - $(clean "$6").$ext"
else
    out_filename="$4.$5 - $(clean "$6").$ext"
fi

mkdir -p "$out_path"
cp "$1" "$out_path/$out_filename" | zenity --progress --title="Copying Files" --text "$(echo "$out_path/$out_filename" | sed 's/&amp;/&amp;amp;/g')" --auto-close</code>
    <p><a href="index.html">Back to main page</a></p>
    <hr/>
    <p>
        Â©2013-2014 Justin Jacobs.<br/>
        This page uses valid <a href="http://jigsaw.w3.org/css-validator/check/referer">CSS 2.1</a> and <a href="http://validator.w3.org/check?uri=referer">XHTML 1.0 Strict</a>.
    </p>
</body>

</html>
